<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="bootstrap-4.3.1-dist/css/bootstrap.css">
    <link rel="stylesheet" href="bootstrap-table/dist/bootstrap-table.css">
    <link rel="stylesheet" href="bootstrap-submenu/dist/css/bootstrap-submenu.css">
    <link rel="stylesheet" href="fontawesome-free-5.7.2/css/all.css">
    <link rel="stylesheet" href="common/css/custome.css">

    <script src="jquery-3.3.1/jquery-3.3.1.js" ></script>
    <script src="bootstrap-4.3.1-dist/js/bootstrap.bundle.js" ></script>
    <script src="bootstrap-table/dist/bootstrap-table.js" ></script>
    <script src="bootstrap-table/dist/extensions/toolbar/bootstrap-table-toolbar.js" ></script>
    <script src="bootstrap-table/dist/bootstrap-table-locale-all.min.js"></script>
    <script src="bootstrap-table/dist/extensions/i18n-enhance/bootstrap-table-i18n-enhance.min.js"></script>
    <script src="tableexport.jquery.plugin/tableExport.js"></script>
    <script src="bootstrap-table/dist/extensions/export/bootstrap-table-export.js"></script>
    <script src="bootstrap-submenu/dist/js/bootstrap-submenu.js" ></script>
    <script src="jquery.nicescroll-3.7.6/jquery.nicescroll.js" ></script>

</head>
<body>
<div class="modal" id="license-modal" role="dialog" aria-labelledby="全局配置" >
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document" data-show="true">
        <div class="modal-content">
            <div class="modal-body" >
                <form id='license_form' class="form-horizontal ">
                    <div class="form-group" >
                        <div class="input-group">
                            <textarea id="license_cnt" rows="10" name="license_cnt" class="form-control" ></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary"   id="license-copy">复制</button>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="global" role="dialog" aria-labelledby="全局配置" >
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document" data-show="true">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="globalModalLabel">全局配置</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body" >
                <ul class="nav nav-tabs" id="global_tab" role="tablist"></ul>
                <form id='global_form' class="form-horizontal "><div class="tab-content" id="global_content"></div></form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" id="save_global">保存</button>
            </div>
        </div>
    </div>
</div>
<div class="modal bs-example-modal-lg" id="installModel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-xl modal-dialog-centered" >
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" >安装进度 <span class="small" id="processTitle"></span></h4>
                <button type="button" id="closeLog"  class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <div id="installPercent" class="progress"><div role="progressbar" class="progress-bar progress-bar-striped"></div></div>
                <div id="log-container" >
                    <div class="logInsert" ></div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-loading-text="操作中...."></button>
            </div>
        </div>
    </div>
</div>

<div class="modal bs-example-modal-lg" id="uploadModel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-xl modal-dialog-centered" >
        <div class="modal-content">
            <div class="modal-body">
                <div id="uploadPercent" class="progress"><div role="progressbar" class="progress-bar progress-bar-striped"></div></div>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="host-add" role="dialog" aria-labelledby="添加主机" >
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document" data-show="true">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">添加主机</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body" >
                <form id='host_form' class="form-horizontal ">
                    <div class="form-group hostSingle">
                        <label class="control-label">主机IP:</label>
                        <div class="input-group">
                            <div class="input-group-prepend"><span class="input-group-text fa fa-desktop"></span></div>
                            <input id="ip" name="ip" class="form-control" placeholder="192.168.1.1" type="text" value=""/>
                        </div>
                    </div>
                    <div class="form-row hostGroup">
                        <div class="form-group col-md-6">
                            <label class="control-label">开始IP:</label>
                            <div class="input-group">
                                <div class="input-group-prepend"><span class="input-group-text fa fa-desktop"></span></div>
                                <input id="startIp" name="startIp" class="form-control" placeholder="192.168.1.1" type="text" value=""/>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label class="control-label">结束IP:</label>
                            <div class="input-group">
                                <div class="input-group-prepend"><span class="input-group-text fa fa-desktop"></span></div>
                                <input id="endIp" name="endIp" class="form-control" placeholder="192.168.1.5"  type="text" value=""/>
                            </div>
                        </div>
                    </div>
                    <div class="form-group custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="isGroup">
                        <label class="custom-control-label" for="isGroup">连续主机</label>
                    </div>

                    <div class="form-group">
                        <label class="control-label">支持GPU:</label>
                        <div class="form-row custom-control custom-radio " style="display: flex!important;">
                            <div class="col-md-2">
                                <input class="custom-control-input" type="radio" name="hasGpu" id="un_support" value="false" checked="checked">
                                <label class="custom-control-label" for="un_support">否</label>
                            </div>
                            <div class="col-md-2">
                                <input class="custom-control-input" type="radio" name="hasGpu" id="support" value="true" >
                                <label class="custom-control-label" for="support">是</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group " >
                        <label class="control-label" for="username">用户名:</label>
                        <div class="input-group">
                            <div class="input-group-prepend"><span class="input-group-text fa fa-user"></span></div>
                            <input id="username" name="username" class="form-control" placeholder="username" type="text" value=""/>
                        </div>
                    </div>

                    <div class="form-group " >
                        <label class="control-label" for="password">密码:</label>
                        <div class="input-group">
                            <div class="input-group-prepend"><span class="input-group-text fa fa-lock"></span></div>
                            <input id="password" name="password" class="form-control" placeholder="password" type="text" value=""/>
                        </div>
                    </div>

                    <div class="form-group " >
                        <label class="control-label" for="sshPort">ssh端口:</label>
                        <div class="input-group">
                            <div class="input-group-prepend"><span class="input-group-text fa fa-exchange-alt"></span></div>
                            <input id="sshPort" name="sshPort" class="form-control" placeholder="22" type="text" value="22"/>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="save_host">保存</button>
            </div>
        </div>
    </div>
</div>
<nav class="navbar show-top sticky-top navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="index.html">集群管理 <small id="env_code"></small></a>
    <a class="navbar-brand text-secondary" href="javascript:void(0);" id="license"></a>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto"></ul>

        <form id="template-form" class="top-tool">
            <a href="template/host_template.xls" title="下载">下载模板 <i  class="fas fa-download"></i></a>
            <a class="btn btn-primary" href="javascript:void(0);"  data-toggle="modal" data-target="#host-add"  id="add_btn" title="添加主机"><i  class="fa fa-plus"></i> 添加主机</a>
            <a class="btn btn-primary" href="javascript:void(0);" onclick="$('#template').click()" title="参照左侧下载模板规范" ><i class="fas fa-upload" type="file" ></i> 导入主机模板</a>
            <a class="btn btn-primary" href="files.html" target="_blank" id="file_btn" title="文件编辑"><i  class="fa fa-file"></i> 文件编辑</a>
            <a class="btn btn-primary" href="k8s.html" title="资源列表" target="_blank"><i  class="fa fa-list-ul"></i> 资源列表</a>
            <a class="btn btn-primary" href="logs.html" title="任务列表" target="_blank"><i  class="fa fa-water"></i> 任务列表</a>
            <input type="file" id="template" name="template" class="d-none" />
            <div class="btn-group dropdown  top-tool" id="tools_group"></div>
            <a class="btn btn-primary" href="javascript:void(0);"  data-toggle="modal" data-target="#global"  id="save_global_model" title="全局配置"><i  class="fa fa-cog"></i> 全局配置</a>
            <input type="file" id="package" name="package" class="d-none" />
        </form>
    </div>
</nav>
<div class="container-fluid">
    <div id="toolbar">
        <form id="vip_form" >
            <div class="row">
                <label for="k8s_virtual_ip" class="col-sm-2 col-form-label">VIP：</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="k8s_virtual_ip" placeholder="K8S高可用虚拟IP">
                </div>
            </div>
        </form>
    </div>
    <table id="host_table"
           data-toolbar="#toolbar"
           data-search="true"
           data-show-refresh="true"
           data-show-toggle="true"
           data-show-fullscreen="true"
           data-show-export="true"
           data-show-columns="true"
           data-locale="zh-CN"
           data-show-pagination-switch="true"
           data-pagination="true"
           data-page-list="[10, 25, 50, 100, ALL]"
           data-show-footer="true">
        <!--data-show-export="true"-->
        <!--data-detail-view="true"-->
    </table>
</div>
</body>
<script src="common/js/utils.js"></script>
<script src="common/js/play.js"></script>
<script src="common/js/global.js"></script>
<script src="common/js/handle.js"></script>
<script src="common/js/form.js"></script>
<script src="common/js/install.js"></script>
<script src="common/js/table.js"></script>

<script type="text/javascript">
    $(function(){
        basePath="";
        _table = new Table();
    });
</script>
</html>
